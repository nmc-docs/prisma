"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[481],{3330:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>l,contentTitle:()=>h,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>o});var t=e(4848),s=e(8453);const c={sidebar_position:2},h="Quan h\u1ec7 1 - n",r={id:"relations/one-to-many-relation",title:"Quan h\u1ec7 1 - n",description:"1 - n relation",source:"@site/docs/relations/one-to-many-relation.md",sourceDirName:"relations",slug:"/relations/one-to-many-relation",permalink:"/prisma/relations/one-to-many-relation",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Quan h\u1ec7 1 - 1",permalink:"/prisma/relations/one-to-one-relation"},next:{title:"Quan h\u1ec7 n - n",permalink:"/prisma/relations/many-to-many-relation"}},l={},o=[{value:"1 - n relation",id:"1---n-relation",level:2},{value:"Optional one-to-many relation",id:"optional-one-to-many-relation",level:2},{value:"Disambiguating relations",id:"disambiguating-relations",level:2}];function a(n){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"quan-h\u1ec7-1---n",children:"Quan h\u1ec7 1 - n"})}),"\n",(0,t.jsx)(i.h2,{id:"1---n-relation",children:"1 - n relation"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Trong Prisma, quan h\u1ec7 one-to-many (m\u1ed9t-nhi\u1ec1u) \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng khi m\u1ed9t b\u1ea3n ghi trong m\u1ed9t b\u1ea3ng c\xf3 th\u1ec3 li\xean k\u1ebft v\u1edbi nhi\u1ec1u b\u1ea3n ghi trong m\u1ed9t b\u1ea3ng kh\xe1c. V\xed d\u1ee5, m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"})," c\xf3 th\u1ec3 c\xf3 nhi\u1ec1u ",(0,t.jsx)(i.code,{children:"Post"}),", nh\u01b0ng m\u1ed7i ",(0,t.jsx)(i.code,{children:"Post"})," ch\u1ec9 thu\u1ed9c v\u1ec1 m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["D\u01b0\u1edbi \u0111\xe2y l\xe0 m\u1ed9t v\xed d\u1ee5 v\u1ec1 quan h\u1ec7 one-to-many gi\u1eefa hai b\u1ea3ng ",(0,t.jsx)(i.code,{children:"User"})," v\xe0 ",(0,t.jsx)(i.code,{children:"Post"})," trong Prisma:"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"1729522422444",src:e(328).A+"",width:"1330",height:"696"})}),"\n",(0,t.jsxs)(i.admonition,{type:"info",children:[(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\u1ede b\u1ea3ng ",(0,t.jsx)(i.code,{children:"User"}),", tr\u01b0\u1eddng ",(0,t.jsx)(i.code,{children:"posts"})," l\xe0 m\u1ed9t danh s\xe1ch (",(0,t.jsx)(i.code,{children:"Post[]"}),"), bi\u1ec3u th\u1ecb r\u1eb1ng m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"})," c\xf3 th\u1ec3 c\xf3 nhi\u1ec1u ",(0,t.jsx)(i.code,{children:"Post"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["\u1ede b\u1ea3ng ",(0,t.jsx)(i.code,{children:"Post"}),", tr\u01b0\u1eddng ",(0,t.jsx)(i.code,{children:"userId"})," l\xe0 kh\xf3a ngo\u1ea1i (",(0,t.jsx)(i.code,{children:"foreign key"}),") li\xean k\u1ebft v\u1edbi tr\u01b0\u1eddng ",(0,t.jsx)(i.code,{children:"id"})," c\u1ee7a b\u1ea3ng ",(0,t.jsx)(i.code,{children:"User"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Thu\u1ed9c t\xednh ",(0,t.jsx)(i.code,{children:"@relation(fields: [userId], references: [id])"})," thi\u1ebft l\u1eadp m\u1ed1i quan h\u1ec7 v\u1edbi b\u1ea3ng ",(0,t.jsx)(i.code,{children:"User"}),", ch\u1ec9 ra r\u1eb1ng m\u1ed7i ",(0,t.jsx)(i.code,{children:"Post"})," ch\u1ec9 c\xf3 m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"}),"."]}),"\n"]}),(0,t.jsxs)(i.p,{children:["V\u1edbi thi\u1ebft l\u1eadp n\xe0y, m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"})," c\xf3 th\u1ec3 c\xf3 nhi\u1ec1u b\xe0i vi\u1ebft (",(0,t.jsx)(i.code,{children:"Post"}),"), nh\u01b0ng m\u1ed7i b\xe0i vi\u1ebft (",(0,t.jsx)(i.code,{children:"Post"}),") ph\u1ea3i lu\xf4n li\xean k\u1ebft v\u1edbi m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"}),"."]})]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["V\xed d\u1ee5 sau l\u1ea5y tr\u01b0\u1eddng ",(0,t.jsx)(i.code,{children:"email"})," l\xe0m kh\xf3a ngo\u1ea1i:"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"1729522463514",src:e(5477).A+"",width:"1528",height:"576"})}),"\n",(0,t.jsx)(i.admonition,{type:"caution",children:(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["L\u01b0u \xfd r\u1eb1ng trong model \u0111\u01b0\u1ee3c tham chi\u1ebfu \u0111\u1ebfn, thu\u1ed9c t\xednh n\xe0o m\xe0 kh\xf3a ngo\u1ea1i li\xean k\u1ebft \u0111\u1ebfn th\xec b\u1eaft bu\u1ed9c ph\u1ea3i c\xf3 attribute ",(0,t.jsx)(i.code,{children:"@unique"})," (nh\u01b0 \u1edf v\xed d\u1ee5 tr\xean l\xe0 tr\u01b0\u1eddng ",(0,t.jsx)(i.code,{children:"email"}),")"]}),"\n"]})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"D\u01b0\u1edbi \u0111\xe2y l\xe0 v\xed d\u1ee5 trong MongoDB:"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"1729522523895",src:e(6750).A+"",width:"1348",height:"536"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"1729522556251",src:e(3476).A+"",width:"1366",height:"616"})}),"\n",(0,t.jsx)(i.h2,{id:"optional-one-to-many-relation",children:"Optional one-to-many relation"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\u0110\u1ec3 khi t\u1ea1o ",(0,t.jsx)(i.code,{children:"Post"})," m\xe0 kh\xf4ng c\u1ea7n li\xean k\u1ebft v\u1edbi m\u1ed9t ",(0,t.jsx)(i.code,{children:"User"}),", ta l\xe0m nh\u01b0 sau:"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"1729522593221",src:e(2090).A+"",width:"1348",height:"536"})}),"\n",(0,t.jsx)(i.h2,{id:"disambiguating-relations",children:"Disambiguating relations"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Disambiguating relations"})," trong Prisma l\xe0 khi ta c\u1ea7n ph\u1ea3i l\xe0m r\xf5 c\xe1c m\u1ed1i quan h\u1ec7 gi\u1eefa c\xe1c b\u1ea3ng khi c\xf3 nhi\u1ec1u h\u01a1n m\u1ed9t quan h\u1ec7 gi\u1eefa hai b\u1ea3ng gi\u1ed1ng nhau. \u0110i\u1ec1u n\xe0y tr\xe1nh nh\u1ea7m l\u1eabn khi truy c\u1eadp ho\u1eb7c s\u1eed d\u1ee5ng c\xe1c m\u1ed1i quan h\u1ec7, \u0111\u1eb7c bi\u1ec7t khi c\xf3 nhi\u1ec1u quan h\u1ec7 t\u01b0\u01a1ng t\u1ef1 gi\u1eefa c\xe1c b\u1ea3ng."]}),"\n",(0,t.jsxs)(i.li,{children:["Gi\u1ea3 s\u1eed ta c\xf3 m\u1ed9t h\u1ec7 th\u1ed1ng m\xe0 ",(0,t.jsx)(i.code,{children:"User"}),' c\xf3 th\u1ec3 "t\u1ea1o" c\xe1c ',(0,t.jsx)(i.code,{children:"Post"}),' v\xe0 c\u0169ng c\xf3 th\u1ec3 "c\u1eadp nh\u1eadt" c\xe1c ',(0,t.jsx)(i.code,{children:"Post"}),". Trong tr\u01b0\u1eddng h\u1ee3p n\xe0y, c\xf3 hai quan h\u1ec7 gi\u1eefa ",(0,t.jsx)(i.code,{children:"User"})," v\xe0 ",(0,t.jsx)(i.code,{children:"Post"}),": m\u1ed9t l\xe0 ng\u01b0\u1eddi t\u1ea1o, m\u1ed9t l\xe0 ng\u01b0\u1eddi c\u1eadp nh\u1eadt. \u0110\u1ec3 ph\xe2n bi\u1ec7t ch\xfang, ta ph\u1ea3i \u0111\u1eb7t t\xean ri\xeang bi\u1ec7t cho t\u1eebng m\u1ed1i quan h\u1ec7 b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng thu\u1ed9c t\xednh ",(0,t.jsx)(i.a,{href:"./@relation#name",children:"name"})]}),"\n",(0,t.jsx)(i.li,{children:"D\u01b0\u1edbi \u0111\xe2y l\xe0 v\xed d\u1ee5 v\u1ec1 c\xe1ch gi\u1ea3i quy\u1ebft m\u1ed1i quan h\u1ec7 m\u01a1 h\u1ed3 n\xe0y:"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"1729522669987",src:e(1269).A+"",width:"1870",height:"936"})}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["L\xfd do c\u1ea7n Disambiguating: N\u1ebfu kh\xf4ng \u0111\u1eb7t t\xean r\xf5 r\xe0ng cho c\xe1c quan h\u1ec7 n\xe0y (s\u1eed d\u1ee5ng ",(0,t.jsx)(i.code,{children:'@relation("CreatedPosts")'})," v\xe0 ",(0,t.jsx)(i.code,{children:'@relation("UpdatedPosts")'}),"), Prisma s\u1ebd kh\xf4ng th\u1ec3 ph\xe2n bi\u1ec7t m\u1ed1i quan h\u1ec7 n\xe0o l\xe0 c\u1ee7a ng\u01b0\u1eddi t\u1ea1o v\xe0 m\u1ed1i quan h\u1ec7 n\xe0o l\xe0 c\u1ee7a ng\u01b0\u1eddi c\u1eadp nh\u1eadt, g\xe2y ra l\u1ed7i ho\u1eb7c nh\u1ea7m l\u1eabn khi truy c\u1eadp d\u1eef li\u1ec7u."]}),"\n"]})}),"\n",(0,t.jsx)(i.admonition,{type:"tip",children:(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Khi n\xe0o c\u1ea7n Disambiguating Relations:","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Khi c\xf3 nhi\u1ec1u h\u01a1n m\u1ed9t quan h\u1ec7 gi\u1eefa hai b\u1ea3ng gi\u1ed1ng nhau."}),"\n",(0,t.jsx)(i.li,{children:"Khi ta mu\u1ed1n qu\u1ea3n l\xfd c\xe1c m\u1ed1i quan h\u1ec7 kh\xe1c nhau m\u1ed9t c\xe1ch t\u01b0\u1eddng minh \u0111\u1ec3 tr\xe1nh nh\u1ea7m l\u1eabn trong c\xe1c truy v\u1ea5n."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.li,{children:"Disambiguating relations gi\xfap l\xe0m r\xf5 c\xe1c m\u1ed1i quan h\u1ec7, \u0111\u1ea3m b\u1ea3o ch\xfang \u0111\u01b0\u1ee3c truy v\u1ea5n v\xe0 qu\u1ea3n l\xfd m\u1ed9t c\xe1ch ch\xednh x\xe1c."}),"\n"]})})]})}function d(n={}){const{wrapper:i}={...(0,s.R)(),...n.components};return i?(0,t.jsx)(i,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},328:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/1729522422444-dd102cd60bfa6bd9528b6633d3b49868.png"},5477:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/1729522463514-b6c4783e305b59a2005ab75f56f94f77.png"},6750:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/1729522523895-338e30ca0909f34a93864a1ad0bf1fa0.png"},3476:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/1729522556251-296fd7ea7f05a4248755616f8dcac49a.png"},2090:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/1729522593221-b62e4da89987bdb9ae50332b31784502.png"},1269:(n,i,e)=>{e.d(i,{A:()=>t});const t=e.p+"assets/images/1729522669987-2f43babee34d70a0e313317ee9f95907.png"},8453:(n,i,e)=>{e.d(i,{R:()=>h,x:()=>r});var t=e(6540);const s={},c=t.createContext(s);function h(n){const i=t.useContext(c);return t.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function r(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:h(n.components),t.createElement(c.Provider,{value:i},n.children)}}}]);