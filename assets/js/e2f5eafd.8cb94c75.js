"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[373],{3180:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>h,contentTitle:()=>c,default:()=>o,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var s=e(4848),t=e(8453);const r={sidebar_position:1,slug:"/"},c="Gi\u1edbi thi\u1ec7u v\u1ec1 Prisma",l={id:"introduce",title:"Gi\u1edbi thi\u1ec7u v\u1ec1 Prisma",description:"Prisma l\xe0 g\xec?",source:"@site/docs/introduce.md",sourceDirName:".",slug:"/",permalink:"/prisma/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/"},sidebar:"tutorialSidebar",next:{title:"\u0110\u1ecbnh ngh\u0129a model, column",permalink:"/prisma/category/\u0111\u1ecbnh-ngh\u0129a-model-column"}},h={},a=[{value:"Prisma l\xe0 g\xec?",id:"prisma-l\xe0-g\xec",level:2},{value:"C\xe0i \u0111\u1eb7t",id:"c\xe0i-\u0111\u1eb7t",level:2},{value:"C\xe0i \u0111\u1eb7t Prisma v\xe0 Prisma Client",id:"c\xe0i-\u0111\u1eb7t-prisma-v\xe0-prisma-client",level:3},{value:"Kh\u1edfi t\u1ea1o Prisma",id:"kh\u1edfi-t\u1ea1o-prisma",level:3},{value:"Thi\u1ebft l\u1eadp URI \u0111\u1ec3 k\u1ebft n\u1ed1i t\u1edbi CSDL",id:"thi\u1ebft-l\u1eadp-uri-\u0111\u1ec3-k\u1ebft-n\u1ed1i-t\u1edbi-csdl",level:3},{value:"\u0110\u1ecbnh ngh\u0129a model",id:"\u0111\u1ecbnh-ngh\u0129a-model",level:3},{value:"Migrate",id:"migrate",level:3},{value:"Generate",id:"generate",level:3},{value:"S\u1eed d\u1ee5ng Prisma Client \u0111\u1ec3 th\u1ef1c hi\u1ec7n truy v\u1ea5n",id:"s\u1eed-d\u1ee5ng-prisma-client-\u0111\u1ec3-th\u1ef1c-hi\u1ec7n-truy-v\u1ea5n",level:2}];function d(n){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"gi\u1edbi-thi\u1ec7u-v\u1ec1-prisma",children:"Gi\u1edbi thi\u1ec7u v\u1ec1 Prisma"})}),"\n",(0,s.jsx)(i.h2,{id:"prisma-l\xe0-g\xec",children:"Prisma l\xe0 g\xec?"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Prisma"})," l\xe0 m\u1ed9t c\xf4ng c\u1ee5 ph\xe1t tri\u1ec3n c\u01a1 s\u1edf d\u1eef li\u1ec7u (ORM - Object-Relational Mapping) hi\u1ec7n \u0111\u1ea1i, gi\xfap \u0111\u01a1n gi\u1ea3n h\xf3a vi\u1ec7c l\xe0m vi\u1ec7c v\u1edbi c\u01a1 s\u1edf d\u1eef li\u1ec7u trong c\xe1c \u1ee9ng d\u1ee5ng. Prisma h\u1ed7 tr\u1ee3 nhi\u1ec1u c\u01a1 s\u1edf d\u1eef li\u1ec7u quan h\u1ec7 nh\u01b0 PostgreSQL, MySQL, SQLite v\xe0 Microsoft SQL Server."]}),"\n",(0,s.jsx)(i.p,{children:"Prisma bao g\u1ed3m ba th\xe0nh ph\u1ea7n ch\xednh:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Prisma Client"}),": \u0110\xe2y l\xe0 m\u1ed9t th\u01b0 vi\u1ec7n t\u1ef1 \u0111\u1ed9ng t\u1ea1o code \u0111\u1ec3 t\u01b0\u01a1ng t\xe1c v\u1edbi c\u01a1 s\u1edf d\u1eef li\u1ec7u t\u1eeb m\xe3 JavaScript ho\u1eb7c TypeScript c\u1ee7a b\u1ea1n. B\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng Prisma Client \u0111\u1ec3 truy v\u1ea5n, t\u1ea1o, c\u1eadp nh\u1eadt v\xe0 x\xf3a d\u1eef li\u1ec7u t\u1eeb c\u01a1 s\u1edf d\u1eef li\u1ec7u m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Prisma Migrate"}),": C\xf4ng c\u1ee5 qu\u1ea3n l\xfd migrations cho c\u01a1 s\u1edf d\u1eef li\u1ec7u. N\xf3 cho ph\xe9p b\u1ea1n d\u1ec5 d\xe0ng qu\u1ea3n l\xfd c\xe1c thay \u0111\u1ed5i trong c\u1ea5u tr\xfac d\u1eef li\u1ec7u khi ph\xe1t tri\u1ec3n d\u1ef1 \xe1n, nh\u01b0 th\xeam b\u1ea3ng m\u1edbi, thay \u0111\u1ed5i c\u1ed9t, ho\u1eb7c ch\u1ec9nh s\u1eeda kh\xf3a ch\xednh."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Prisma Studio"}),": Giao di\u1ec7n ng\u01b0\u1eddi d\xf9ng tr\u1ef1c quan gi\xfap b\u1ea1n xem v\xe0 qu\u1ea3n l\xfd d\u1eef li\u1ec7u trong c\u01a1 s\u1edf d\u1eef li\u1ec7u m\u1ed9t c\xe1ch tr\u1ef1c ti\u1ebfp t\u1eeb tr\xecnh duy\u1ec7t."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Prisma kh\xf4ng ch\u1ec9 h\u1ed7 tr\u1ee3 t\u1ed1t cho c\xe1c \u1ee9ng d\u1ee5ng web m\xe0 c\xf2n gi\xfap \u0111\u1ed3ng b\u1ed9 h\xf3a m\xe3 ngu\u1ed3n v\u1edbi c\u1ea5u tr\xfac c\u01a1 s\u1edf d\u1eef li\u1ec7u, gi\u1ea3m thi\u1ec3u l\u1ed7i c\xfa ph\xe1p v\xe0 logic."}),"\n",(0,s.jsx)(i.h2,{id:"c\xe0i-\u0111\u1eb7t",children:"C\xe0i \u0111\u1eb7t"}),"\n",(0,s.jsx)(i.h3,{id:"c\xe0i-\u0111\u1eb7t-prisma-v\xe0-prisma-client",children:"C\xe0i \u0111\u1eb7t Prisma v\xe0 Prisma Client"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ba",children:"npm i -D prisma && npm i @prisma/client\n"})}),"\n",(0,s.jsx)(i.h3,{id:"kh\u1edfi-t\u1ea1o-prisma",children:"Kh\u1edfi t\u1ea1o Prisma"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"npx prisma init\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["L\u1ec7nh n\xe0y s\u1ebd t\u1ea1o ra th\u01b0 m\u1ee5c ",(0,s.jsx)(i.code,{children:"prisma/"})," ch\u1ee9a file ",(0,s.jsx)(i.code,{children:"schema.prisma"}),", n\u01a1i b\u1ea1n s\u1ebd \u0111\u1ecbnh ngh\u0129a c\u1ea5u tr\xfac c\u01a1 s\u1edf d\u1eef li\u1ec7u c\u1ee7a m\xecnh. \u0110\u1ed3ng th\u1eddi, n\xf3 c\u0169ng t\u1ea1o file ",(0,s.jsx)(i.code,{children:".env"})," \u0111\u1ec3 c\u1ea5u h\xecnh k\u1ebft n\u1ed1i c\u01a1 s\u1edf d\u1eef li\u1ec7u."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"thi\u1ebft-l\u1eadp-uri-\u0111\u1ec3-k\u1ebft-n\u1ed1i-t\u1edbi-csdl",children:"Thi\u1ebft l\u1eadp URI \u0111\u1ec3 k\u1ebft n\u1ed1i t\u1edbi CSDL"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["V\xe0o file ",(0,s.jsx)(i.strong,{children:".env"})," \u0111\u1ec3 c\u1eadp nh\u1eadt URI \u0111\u1ec3 k\u1ebft n\u1ed1i t\u1edbi CSDL:"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-plaintext",metastring:'title=".env"',children:'DATABASE_URL="mysql://root:ptit_15092002@localhost:3306/ptit_db"\n'})}),"\n",(0,s.jsx)(i.h3,{id:"\u0111\u1ecbnh-ngh\u0129a-model",children:"\u0110\u1ecbnh ngh\u0129a model"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["V\xe0o file ",(0,s.jsx)(i.strong,{children:"prisma/schema.prisma"})," \u0111\u1ec3 \u0111\u1ecbnh ngh\u0129a c\xe1c entity (model):"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-plaintext",metastring:'title="prisma/schema.prisma"',children:'generator client {\n  provider = "prisma-client-js"\n}\n\ndatasource db {\n  provider = "mysql" // S\u1eeda l\u1ea1i t\xean provider t\xf9y theo database b\u1ea1n s\u1eed d\u1ee5ng\n  url      = env("DATABASE_URL")\n}\n\nmodel User {\n  id        Int      @id @default(autoincrement())\n  email     String   @unique\n  name      String?\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n'})}),"\n",(0,s.jsx)(i.h3,{id:"migrate",children:"Migrate"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Sau khi \u0111\u1ecbnh ngh\u0129a xong model, ta ch\u1ea1y l\u1ec7nh:"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"npx prisma migrate dev\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["C\xe2u l\u1ec7nh ",(0,s.jsx)(i.code,{children:"npx prisma migrate dev"})," \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong qu\xe1 tr\xecnh ",(0,s.jsx)(i.strong,{children:"PH\xc1T TRI\u1ec2N"})," \u0111\u1ec3 \xe1p d\u1ee5ng c\xe1c thay \u0111\u1ed5i v\u1ec1 c\u1ea5u tr\xfac c\u01a1 s\u1edf d\u1eef li\u1ec7u (migrations) d\u1ef1a tr\xean \u0111\u1ecbnh ngh\u0129a trong file ",(0,s.jsx)(i.code,{children:"schema.prisma"}),". C\u1ee5 th\u1ec3, n\xf3 th\u1ef1c hi\u1ec7n c\xe1c nhi\u1ec7m v\u1ee5 sau:"]}),"\n"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"T\u1ea1o Migration m\u1edbi"}),": Khi b\u1ea1n ch\u1ec9nh s\u1eeda file ",(0,s.jsx)(i.code,{children:"schema.prisma"})," (v\xed d\u1ee5, th\xeam b\u1ea3ng, thay \u0111\u1ed5i c\u1ed9t, x\xf3a b\u1ea3ng, v.v.), l\u1ec7nh n\xe0y s\u1ebd t\u1ea1o m\u1ed9t migration m\u1edbi \u0111\u1ec3 l\u01b0u tr\u1eef c\xe1c thay \u0111\u1ed5i."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"\xc1p d\u1ee5ng Migration"}),": Sau khi migration \u0111\u01b0\u1ee3c t\u1ea1o, l\u1ec7nh n\xe0y s\u1ebd \xe1p d\u1ee5ng migration \u0111\xf3 l\xean c\u01a1 s\u1edf d\u1eef li\u1ec7u hi\u1ec7n t\u1ea1i, c\u1eadp nh\u1eadt c\u01a1 s\u1edf d\u1eef li\u1ec7u theo nh\u1eefng thay \u0111\u1ed5i b\u1ea1n \u0111\xe3 \u0111\u1ecbnh ngh\u0129a."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"\u0110\u1ed3ng b\u1ed9 Prisma Client"}),": L\u1ec7nh n\xe0y c\u0169ng t\u1ef1 \u0111\u1ed9ng t\u1ea1o l\u1ea1i Prisma Client, \u0111\u1ed3ng b\u1ed9 h\xf3a m\xe3 ngu\u1ed3n v\u1edbi nh\u1eefng thay \u0111\u1ed5i trong c\u1ea5u tr\xfac c\u01a1 s\u1edf d\u1eef li\u1ec7u \u0111\u1ec3 b\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng ngay l\u1eadp t\u1ee9c c\xe1c m\xf4 h\xecnh d\u1eef li\u1ec7u m\u1edbi trong \u1ee9ng d\u1ee5ng."]}),"\n"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["N\u1ebfu b\u1ea1n th\xeam m\u1ed9t b\u1ea3ng m\u1edbi ",(0,s.jsx)(i.code,{children:"User"})," trong file ",(0,s.jsx)(i.code,{children:"schema.prisma"}),":"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-prisma",metastring:'title="prisma/schema.prisma"',children:"model User {\n  id    Int     @id @default(autoincrement())\n  name  String\n  email String  @unique\n}\n"})}),"\n",(0,s.jsxs)(i.p,{children:["Sau khi ch\u1ea1y ",(0,s.jsx)(i.code,{children:"npx prisma migrate dev"}),", m\u1ed9t migration m\u1edbi s\u1ebd \u0111\u01b0\u1ee3c t\u1ea1o v\xe0 \xe1p d\u1ee5ng \u0111\u1ec3 t\u1ea1o b\u1ea3ng ",(0,s.jsx)(i.code,{children:"User"})," trong c\u01a1 s\u1edf d\u1eef li\u1ec7u c\u1ee7a b\u1ea1n."]}),"\n",(0,s.jsxs)(i.admonition,{type:"note",children:[(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Khi deploy ho\u1eb7c \u1edf m\xf4i tr\u01b0\u1eddng production, h\xe3y ch\u1ea1y l\u1ec7nh:"}),"\n"]}),(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"npx prisma migrate deploy\n"})})]}),"\n",(0,s.jsx)(i.h3,{id:"generate",children:"Generate"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Cu\u1ed1i c\xf9ng, ta ch\u1ea1y l\u1ec7nh:"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"npx prisma generate\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["L\u1ec7nh ",(0,s.jsx)(i.code,{children:"npx prisma generate"})," \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea1o l\u1ea1i Prisma Client sau khi b\u1ea1n \u0111\xe3 ch\u1ec9nh s\u1eeda file ",(0,s.jsx)(i.code,{children:"schema.prisma"}),". Prisma Client l\xe0 m\u1ed9t th\u01b0 vi\u1ec7n \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng t\u1ea1o ra gi\xfap b\u1ea1n t\u01b0\u01a1ng t\xe1c v\u1edbi c\u01a1 s\u1edf d\u1eef li\u1ec7u m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng trong \u1ee9ng d\u1ee5ng c\u1ee7a m\xecnh."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"C\u1ee5 th\u1ec3, l\u1ec7nh n\xe0y th\u1ef1c hi\u1ec7n c\xe1c nhi\u1ec7m v\u1ee5 sau:"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"T\u1ea1o Prisma Client"}),": Sau khi ch\u1ea1y l\u1ec7nh, Prisma s\u1ebd d\u1ef1a v\xe0o file ",(0,s.jsx)(i.code,{children:"schema.prisma"})," \u0111\u1ec3 t\u1ea1o ra Prisma Client t\u01b0\u01a1ng \u1ee9ng v\u1edbi m\xf4 h\xecnh d\u1eef li\u1ec7u trong d\u1ef1 \xe1n c\u1ee7a b\u1ea1n."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"\u0110\u1ed3ng b\u1ed9 h\xf3a m\xe3 ngu\u1ed3n"}),": Prisma Client s\u1ebd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt \u0111\u1ec3 ph\u1ea3n \xe1nh c\xe1c thay \u0111\u1ed5i m\u1edbi nh\u1ea5t trong file ",(0,s.jsx)(i.code,{children:"schema.prisma"}),". \u0110i\u1ec1u n\xe0y gi\xfap b\u1ea1n s\u1eed d\u1ee5ng c\xe1c m\xf4 h\xecnh, ph\u01b0\u01a1ng th\u1ee9c truy v\u1ea5n, v\xe0 c\xe1c tr\u01b0\u1eddng d\u1eef li\u1ec7u m\u1edbi ngay l\u1eadp t\u1ee9c trong \u1ee9ng d\u1ee5ng."]}),"\n"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["S\u1eed d\u1ee5ng l\u1ec7nh n\xe0y:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Sau khi ch\u1ec9nh s\u1eeda file ",(0,s.jsx)(i.code,{children:"schema.prisma"}),"."]}),"\n",(0,s.jsx)(i.li,{children:"Sau khi \xe1p d\u1ee5ng migrations ho\u1eb7c thay \u0111\u1ed5i c\u1ea5u tr\xfac c\u01a1 s\u1edf d\u1eef li\u1ec7u."}),"\n",(0,s.jsx)(i.li,{children:"Khi c\u1ea7n \u0111\u1ed3ng b\u1ed9 c\xe1c m\xf4 h\xecnh d\u1eef li\u1ec7u trong code v\u1edbi c\u01a1 s\u1edf d\u1eef li\u1ec7u hi\u1ec7n t\u1ea1i."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"s\u1eed-d\u1ee5ng-prisma-client-\u0111\u1ec3-th\u1ef1c-hi\u1ec7n-truy-v\u1ea5n",children:"S\u1eed d\u1ee5ng Prisma Client \u0111\u1ec3 th\u1ef1c hi\u1ec7n truy v\u1ea5n"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:'import { PrismaClient } from "@prisma/client";\n\nconst prisma = new PrismaClient();\n// use `prisma` in your application to read and write data in your DB\n'})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-ts",children:'// run inside `async` function\nconst newUser = await prisma.user.create({\n  data: {\n    name: "Alice",\n    email: "alice@prisma.io",\n  },\n});\n\nconst users = await prisma.user.findMany();\n'})})]})}function o(n={}){const{wrapper:i}={...(0,t.R)(),...n.components};return i?(0,s.jsx)(i,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,i,e)=>{e.d(i,{R:()=>c,x:()=>l});var s=e(6540);const t={},r=s.createContext(t);function c(n){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function l(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),s.createElement(r.Provider,{value:i},n.children)}}}]);