"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[445],{7924:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var r=i(4848),t=i(8453);const l={sidebar_position:1},d="Quan h\u1ec7 1 - 1",o={id:"relations/one-to-one",title:"Quan h\u1ec7 1 - 1",description:"1-1 relation",source:"@site/docs/relations/one-to-one.md",sourceDirName:"relations",slug:"/relations/one-to-one",permalink:"/prisma/relations/one-to-one",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Relations",permalink:"/prisma/category/relations"}},s={},c=[{value:"1-1 relation",id:"1-1-relation",level:2},{value:"Optional 1-1 relation",id:"optional-1-1-relation",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"quan-h\u1ec7-1---1",children:"Quan h\u1ec7 1 - 1"})}),"\n",(0,r.jsx)(n.h2,{id:"1-1-relation",children:"1-1 relation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Trong Prisma, quan h\u1ec7 one-to-one (m\u1ed9t-m\u1ed9t) \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng khi m\u1ed9t b\u1ea3n ghi trong m\u1ed9t b\u1ea3ng ch\u1ec9 c\xf3 th\u1ec3 li\xean k\u1ebft v\u1edbi m\u1ed9t b\u1ea3n ghi duy nh\u1ea5t trong b\u1ea3ng kh\xe1c. V\xed d\u1ee5, m\u1ed9t ",(0,r.jsx)(n.code,{children:"User"})," c\xf3 th\u1ec3 c\xf3 m\u1ed9t ",(0,r.jsx)(n.code,{children:"Profile"}),", v\xe0 m\u1ed7i ",(0,r.jsx)(n.code,{children:"Profile"})," ch\u1ec9 thu\u1ed9c v\u1ec1 m\u1ed9t ",(0,r.jsx)(n.code,{children:"User"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["D\u01b0\u1edbi \u0111\xe2y l\xe0 m\u1ed9t v\xed d\u1ee5 v\u1ec1 quan h\u1ec7 one-to-one gi\u1eefa hai b\u1ea3ng ",(0,r.jsx)(n.code,{children:"User"})," v\xe0 ",(0,r.jsx)(n.code,{children:"Profile"})," v\u1edbi CSDL quan h\u1ec7 trong Prisma:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-prisma",children:"model User {\n  id       Int      @id @default(autoincrement())\n  email    String   @unique\n  name     String?\n  profile  Profile?\n}\n\nmodel Profile {\n  id     Int    @id @default(autoincrement())\n  bio    String\n  userId Int    @unique\n  user   User   @relation(fields: [userId], references: [id])\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Trong v\xed d\u1ee5 tr\xean:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"User"})," c\xf3 th\u1ec3 c\xf3 0 ho\u1eb7c 1 ",(0,r.jsx)(n.code,{children:"Profile"})," (v\xec ",(0,r.jsx)(n.code,{children:"profile"})," field l\xe0 optional)"]}),"\n",(0,r.jsxs)(n.li,{children:["M\u1ed9t ",(0,r.jsx)(n.code,{children:"Profile"})," b\u1eaft bu\u1ed9c ph\u1ea3i connect v\u1edbi m\u1ed9t ",(0,r.jsx)(n.code,{children:"User"})]}),"\n",(0,r.jsxs)(n.li,{children:["Trong b\u1ea3ng ",(0,r.jsx)(n.code,{children:"Profile"}),", tr\u01b0\u1eddng ",(0,r.jsx)(n.code,{children:"userId"})," l\xe0 m\u1ed9t kh\xf3a ngo\u1ea1i (",(0,r.jsx)(n.code,{children:"foreign key"}),") tr\u1ecf \u0111\u1ebfn tr\u01b0\u1eddng ",(0,r.jsx)(n.code,{children:"id"})," c\u1ee7a b\u1ea3ng ",(0,r.jsx)(n.code,{children:"User"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Thu\u1ed9c t\xednh ",(0,r.jsx)(n.code,{children:"@unique"})," \u1edf tr\u01b0\u1eddng ",(0,r.jsx)(n.code,{children:"userId"})," \u0111\u1ea3m b\u1ea3o r\u1eb1ng m\u1ed9t ",(0,r.jsx)(n.code,{children:"User"})," ch\u1ec9 c\xf3 th\u1ec3 c\xf3 m\u1ed9t ",(0,r.jsx)(n.code,{children:"Profile"})," duy nh\u1ea5t. (b\u1eaft bu\u1ed9c ph\u1ea3i \u0111\u1eb7t \u0111\u1ec3 r\xe0ng bu\u1ed9c)"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["V\xed d\u1ee5 b\xean tr\xean l\u1ea5y ",(0,r.jsx)(n.code,{children:"id"})," c\u1ee7a user l\xe0m kh\xf3a ngo\u1ea1i, v\xed d\u1ee5 sau \u0111\xe2y s\u1ebd l\u1ea5y ",(0,r.jsx)(n.code,{children:"email"})," l\xe0m kh\xf3a ngo\u1ea1i:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"model User {\n  id      Int      @id @default(autoincrement())\n  email   String   @unique // <-- add unique attribute\n  profile Profile?\n}\n\nmodel Profile {\n  id        Int    @id @default(autoincrement())\n  user      User   @relation(fields: [userEmail], references: [email])\n  userEmail String @unique // relation scalar field (used in the `@relation` attribute above)\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"D\u01b0\u1edbi \u0111\xe2y l\xe0 v\xed d\u1ee5 trong MongoDB:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-prisma",children:'model User {\n  id      String   @id @default(auto()) @map("_id") @db.ObjectId\n  profile Profile?\n}\n\nmodel Profile {\n  id     String @id @default(auto()) @map("_id") @db.ObjectId\n  user   User   @relation(fields: [userId], references: [id])\n  userId String @unique @db.ObjectId // relation scalar field (used in the `@relation` attribute above)\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:'model User {\n  id      String   @id @default(auto()) @map("_id") @db.ObjectId\n  email   String   @unique // <-- add unique attribute\n  profile Profile?\n}\n\nmodel Profile {\n  id        String @id @default(auto()) @map("_id") @db.ObjectId\n  user      User   @relation(fields: [userEmail], references: [email])\n  userEmail String @unique @db.ObjectId // relation scalar field (used in the `@relation` attribute above)\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"optional-1-1-relation",children:"Optional 1-1 relation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Trong v\xed d\u1ee5 tr\xean, khi t\u1ea1o ",(0,r.jsx)(n.strong,{children:"Profile"})," th\xec ta b\u1eaft bu\u1ed9c ph\u1ea3i li\xean k\u1ebft v\u1edbi 1 ",(0,r.jsx)(n.strong,{children:"User"})," c\u1ee5 th\u1ec3, \u0111\u1ec3 kh\xf4ng ph\u1ea3i l\xe0m v\u1eady, ta \u0111\xe1nh d\u1ea5u ch\u1ed7 ",(0,r.jsx)(n.code,{children:"userId"})," v\u1edbi ",(0,r.jsx)(n.code,{children:"user"})," trong model ",(0,r.jsx)(n.strong,{children:"Profile"})," l\xe0 optional:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"model User {\n  id       Int      @id @default(autoincrement())\n  email    String   @unique\n  name     String?\n  profile  Profile?\n}\n\nmodel Profile {\n  id     Int    @id @default(autoincrement())\n  bio    String\n  userId Int?   @unique\n  user   User?  @relation(fields: [userId], references: [id])\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var r=i(6540);const t={},l=r.createContext(t);function d(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);